<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TV en vivo</title>
    <style>
        body {
            background-color: black;
            background-image: url('../img/starfall-night-sky-mountains-aesthetic-gif-preview-desktop-wallpaper.gif'); /* Cambia 'ruta/a/tu/imagen.jpg' */
            background-size: cover; /* Cubre todo el elemento sin deformar */
            background-position: center; /* Centra la imagen */
            background-repeat: no-repeat; /* Evita que la imagen se repita */
            background-attachment: fixed; /* Fija la imagen al hacer scroll */
            margin: 0; /* Elimina márgenes por defecto del body */
            padding: 0; /* Elimina padding por defecto del body */
            height: 100vh; /* Asegura que el body ocupe el 100% del viewport */
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 2px;
            background-color: #f4f4f4;
            text-align: center;
        }
        #player {
            width: 100%;
            max-width: 800px;
            height: 450px;
            margin: 0 auto 20px;
            border: none;
        }
        #playlist {
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            overflow-x: hidden;
            gap: 10px;
            padding: 1px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            max-width: 800px;
            max-height: 400px; /* Altura máxima para permitir scroll vertical */
            margin: 0 auto;
        }
        .playlist-item {
            flex-shrink: 0;
            width: auto; /* Ocupa el ancho completo del contenedor */
            text-align: center;
            cursor: pointer;
            border: 2px solid transparent;
            border-radius: 5px;
            padding: 5px;
            transition: border-color 0.3s;
            display: flex;
            align-items: center;
            gap: 10px; /* Espacio entre imagen y texto */
        }
        .playlist-item.selected {
            border-color: #007bff;
            background-color: #e9ecef;
        }
        .playlist-item img {
            width: 120px; /* Ancho fijo para la imagen */
            height: 67px; /* Altura proporcional */
            object-fit: cover;
            border-radius: 3px;
            flex-shrink: 0;
        }
        .playlist-item p {
            margin: 0;
            font-size: 14px;
            font-weight: bold;
            flex-grow: 1;
            text-align: left;
        }
        /* Responsive design */
        @media (max-width: 768px) {
            #player {
                height: 250px; /* Altura reducida en móviles */
                max-width: 100%;
            }
            #playlist {
                gap: 5px;
                margin: 0 auto;
                max-height: 300px; /* Altura reducida en móviles */
            }
            .playlist-item {
                padding: 3px;
            }
            .playlist-item img {
                width: 100px;
                height: 56px;
            }
            .playlist-item p {
                font-size: 12px;
            }
        }
        @media (max-width: 480px) {
            #player {
                height: 200px;
            }
            #playlist {
                max-height: 450px;
            }
            .playlist-item img {
                width: 95px;
                height: 100%;
            }
            .playlist-item p {
                font-size: 15px;
            }
        }
    </style>
</head>
<body>
    <h1 hidden>TV en vivo</h1>
    <p hidden>Haz doble clic en un elemento de la playlist para editar su título, miniatura y URL.</p>
    <iframe id="player" src="" allowfullscreen></iframe>
    <div id="playlist"></div>

    <script>
        // Array de playlist: url (URL completa del embed), title, thumbnail
        let playlist = [
            {
                url: "https://mdstrm.com/live-stream/58d1921a72e2b22e2905e493?jsapi=true&autoplay=true", // Ejemplo: Video de YouTube (Rick Roll)
                title: "Blu Radio TV",
                thumbnail: "../img/Blu-Radio-TV-200x200.png"
            },
            {
                url: "../live/calitv.html", // Ejemplo: Canal de Twitch (cambia "localhost" por tu dominio)
                title: "Cali TV",
                thumbnail: "../img/Cali-TV-200x200.png"
            },
            {
                url: "https://mdstrm.com/live-stream/5a5e1c2568b1910913db5fe2?jsapi=true&autoplay=true", // Otro video de YouTube
                title: "Canal 1",
                thumbnail: "../img/Canal-1-200x200.png"
            },
            {
                url: "../live/canal2.html", // Otro canal de Twitch
                title: "Canal 2",
                thumbnail: "../img/Canal-2-200x200.png"
            },
            // Nuevos añadidos
            {
                url: "https://media.rtvc.gov.co/kalturartvc/indexCI.html", // Despacito
                title: "Canal Institucional",
                thumbnail: "../img/Canal-Institucional-200x200.png"
            },
            {
                url: "../live/caracol-tv.html", // Shroud
                title: "Caracol TV",
                thumbnail: "../img/Caracol-TV-200x200.png"
            },
            {
                url: "../live/caracolhd2.html", // Shroud
                title: "Caracol HD2",
                thumbnail: "../img/Caracol-HD2-200x200.png"
            },
            {
                url: "https://www.youtube.com/embed/ZA6YS0CYoTA?autoplay=1", // Tutorial de JavaScript
                title: "Noticias Caracol En Vivo",
                thumbnail: "../img/Noticias-Caracol-En-Vivo-200x200.png"
            },
            {
                url: "https://www.youtube.com/embed/fqPcHhxXhog?autoplay=1", // xQc
                title: "City TV",
                thumbnail: "../img/CityTV-200x200.png"
            },
            {
                url: "https://mdstrm.com/live-stream/58d191f07290fbb058025843?jsapi=true&autoplay=true", // Ed Sheeran - Shape of You
                title: "La Kalle TV",
                thumbnail: "../img/La-Kalle-TV-200x200.png"
            },
            {
                url: "https://www.dailymotion.com/embed/video/x8q576z?autoplay=1", // Summit1g
                title: "La Mega (RadioCam)",
                thumbnail: "../img/La-Mega-200x200.png"
            },
            // Ejemplos de otras plataformas con URLs completas
            {
                url: "../live/rcnmas.html", // Canal de Kick
                title: "RCN Más",
                thumbnail: "../img/RCN-Mas-200x200.png" // Nota: Kick no tiene thumbnails públicas fáciles; usa una genérica o ajusta
            },
            {
                url: "../live/redmas.html", // Video de Vimeo
                title: "Red+",
                thumbnail: "../img/Red+-200x200.png" // Usa un servicio de thumbnails o ajusta
            },
            {
                url: "https://media.rtvc.gov.co/kalturartvc/indexSC.html", // Video de Dailymotion
                title: "Señal Colombia",
                thumbnail: "../img/Senal-Colombia-200x200.png" // Ajusta según sea necesario
            },
            {
                url: "https://players.cdn.enetres.net/live/6E5C615AA5FF4123ACAF0DAB57B7B8DC022", // Video de Dailymotion
                title: "Telepacifico",
                thumbnail: "../img/Telepacifico-200x200.png" // Ajusta según sea necesario
            },
            {
                url: "https://players.cdn.enetres.net/live/6E5C615AA5FF4123ACAF0DAB57B7B8DC023", // Video de Dailymotion
                title: "Origen Channel",
                thumbnail: "../img/Origen-Channel-200x200.png" // Ajusta según sea necesario
            },
            {
                url: "https://players.cdn.enetres.net/live/621B146D29C541AFB1507809F038F471021", // Video de Dailymotion
                title: "UAO Play",
                thumbnail: "../img/UAO-Play-200x200.png" // Ajusta según sea necesario
            }
        ];

        // Cargar playlist desde localStorage si existe
        const savedPlaylist = localStorage.getItem('playlist');
        if (savedPlaylist) {
            playlist = JSON.parse(savedPlaylist);
        }

        const player = document.getElementById('player');
        const playlistContainer = document.getElementById('playlist');
        let currentIndex = 0;

        // Función para cargar un video/transmisión
        function loadVideo(index) {
            const item = playlist[index];
            player.src = item.url;
            // Resaltar el seleccionado
            document.querySelectorAll('.playlist-item').forEach((el, i) => {
                el.classList.toggle('selected', i === index);
            });
            currentIndex = index;
        }

        // Función para editar un elemento (doble clic)
        function editItem(index) {
            const item = playlist[index];
            const newUrl = prompt("Editar URL del embed:", item.url);
            const newTitle = prompt("Editar título:", item.title);
            const newThumbnail = prompt("Editar URL de miniatura:", item.thumbnail);
            if (newUrl !== null && newTitle !== null && newThumbnail !== null) {
                playlist[index].url = newUrl;
                playlist[index].title = newTitle;
                playlist[index].thumbnail = newThumbnail;
                localStorage.setItem('playlist', JSON.stringify(playlist)); // Guardar cambios
                renderPlaylist(); // Re-renderizar la playlist
            }
        }

        // Función para renderizar la playlist
        function renderPlaylist() {
            playlistContainer.innerHTML = ''; // Limpiar
            playlist.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'playlist-item';
                if (index === currentIndex) div.classList.add('selected');
                div.innerHTML = `
                    <img src="${item.thumbnail}" alt="${item.title}">
                    <p>${item.title}</p>
                `;
                div.addEventListener('click', () => loadVideo(index));
                div.addEventListener('dblclick', () => editItem(index)); // Doble clic para editar
                playlistContainer.appendChild(div);
            });
        }

        // Renderizar playlist inicial
        renderPlaylist();

        // Cargar el primer video por defecto
        loadVideo(0);
    </script>
</body>
</html>