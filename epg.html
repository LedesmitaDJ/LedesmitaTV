<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <title>EPG Eventos</title>

  <style>
    :root {
      --channel-width: 200px;
      --px-per-minute: 4;
      --row-height: 56px;
      --logo-size: 40px;
      --accent-color: #38bdf8;
      --bg-dark: #020617;
      --bg-card: #1e293b;
    }

    /* TABLET Y MOBILE */
    @media(max-width:1024px) {
      :root {
        --px-per-minute: 3;
        --channel-width: 160px;
        --row-height: 52px;
        --logo-size: 34px;
      }
    }

    @media(max-width:768px) {
      :root {
        --px-per-minute: 2.5;
        --channel-width: 130px;
        --row-height: 48px;
        --logo-size: 28px;
      }

      header {
        flex-direction: column;
        gap: 6px;
        text-align: center;
      }

      .day-btn {
        font-size: 12px;
        padding: 6px 10px;
      }

      .program {
        font-size: 11px;
      }
    }

    * {
      box-sizing: border-box;
      font-family: Segoe UI, Arial, sans-serif;
    }

    body {
      margin: 0;
      background: #0b1220;
      color: #fff;
      overflow: hidden;
    }

    header {
      background: var(--bg-dark);
      padding: 10px 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid #1e293b;
    }

    #clock {
      color: var(--accent-color);
      font-weight: bold;
      font-size: 14px;
    }

    .days {
      display: flex;
      gap: 8px;
      padding: 8px 12px;
      background: var(--bg-dark);
      border-bottom: 1px solid #1e293b;
      overflow-x: auto;
      scrollbar-width: none;
    }

    .days::-webkit-scrollbar {
      display: none;
    }

    .day-btn {
      padding: 6px 12px;
      background: #1e293b;
      border: none;
      color: white;
      border-radius: 4px;
      cursor: pointer;
      white-space: nowrap;
    }

    .day-btn.active {
      background: var(--accent-color);
      color: #020617;
      font-weight: bold;
    }

    main {
      height: calc(100vh - 110px);
      overflow: hidden;
    }

    .epg {
      display: flex;
      height: 100%;
    }

    .channels {
      width: var(--channel-width);
      background: var(--bg-dark);
      position: sticky;
      left: 0;
      z-index: 50;
      flex-shrink: 0;
      border-right: 1px solid #1e293b;
    }

    .channel-spacer {
      height: var(--row-height);
      border-bottom: 1px solid #1e293b;
    }

    .channel {
      height: var(--row-height);
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px;
      border-bottom: 1px solid #1e293b;
      background: var(--bg-dark);
    }

    .channel img {
      width: var(--logo-size);
      height: var(--logo-size);
      object-fit: contain;
    }

    .channel span {
      font-weight: bold;
      font-size: 13px;
      line-height: 1.1;
    }

    .grid {
      position: relative;
      flex: 1;
      overflow: auto;
      background: var(--bg-dark);
      -webkit-overflow-scrolling: touch;
    }

    .hours {
      position: sticky;
      top: 0;
      display: flex;
      z-index: 40;
      background: var(--bg-dark);
    }

    .hour {
      height: var(--row-height);
      min-width: calc(60px * var(--px-per-minute));
      border-right: 1px solid #1e293b;
      padding-top: 14px;
      text-align: center;
      font-size: 13px;
    }

    .rows {
      position: relative;
      min-width: calc(24 * 60px * var(--px-per-minute));
    }

    .row {
      position: relative;
      height: var(--row-height);
      border-bottom: 1px solid #1e293b;
      min-width: calc(24 * 60px * var(--px-per-minute));
    }

    .program {
      position: absolute;
      top: 6px;
      bottom: 6px;
      background: var(--bg-card);
      border-radius: 4px;
      padding: 6px;
      font-size: 12px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      cursor: pointer;
      border: 1px solid transparent;
      transition: border 0.2s;
    }

    .program.live {
      padding-left: 65px;
      /* espacio SOLO cuando hay EN VIVO */
    }

    .program:hover {
      border: 1px solid var(--accent-color);
    }

    .now-line {
      position: absolute;
      top: var(--row-height);
      bottom: 0;
      width: 2px;
      background: red;
      z-index: 45;
      pointer-events: none;
    }

    .now-message {
      position: absolute;
      top: calc(var(--row-height) + 8px);
      padding: 6px 10px;
      background: var(--bg-dark);
      border: 1px solid red;
      border-radius: 4px;
      font-size: 13px;
      font-weight: bold;
      z-index: 46;
      display: none;
      transform: translateX(8px);
    }

    /* --- ESTILOS DEL MODAL --- */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.25);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      backdrop-filter: blur(4px);
    }

    .modal-content {
      background: #111827;
      width: 90%;
      max-width: 480px;
      border-radius: 12px;
      border: 1px solid #334155;
      position: relative;
      overflow: hidden;
    }

    #m-img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      background: #1e293b;
    }

    .modal-info {
      padding: 20px;
    }

    .modal-title {
      color: var(--accent-color);
      font-size: 1.3rem;
      margin: 0 0 10px 0;
    }

    .btn-close {
      background: rgba(0, 0, 0, 0.6);
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      position: absolute;
      top: 10px;
      right: 10px;
      border-radius: 50%;
      width: 35px;
      height: 35px;
    }

    .modal-label {
      color: #64748b;
      font-size: 0.75rem;
      text-transform: uppercase;
      display: block;
      margin-top: 10px;
    }

    .modal-body p {
      margin: 4px 0;
      font-size: 0.95rem;
      color: #e2e8f0;
    }

    .live-badge {
      position: absolute;
      top: 6px;
      left: 6px;
      background: red;
      color: white;
      font-size: 10px;
      font-weight: bold;
      padding: 2px 6px;
      border-radius: 4px;
      z-index: 10;
      pointer-events: none;
      animation: livePulse 1.4s infinite;
    }

    @keyframes livePulse {
      0% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7);
      }

      70% {
        transform: scale(1.08);
        box-shadow: 0 0 0 6px rgba(255, 0, 0, 0);
      }

      100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(255, 0, 0, 0);
      }
    }
  </style>
</head>

<body>

  <header>
    <h3>ðŸ“º GuÃ­a de Eventos</h3>
    <span id="clock"></span>
  </header>

  <div class="days" id="days"></div>

  <main>
    <div class="epg">
      <div class="channels" id="channels"></div>
      <div class="grid" id="grid">
        <div class="now-line" id="nowLine"></div>
        <div class="now-message" id="nowMsg">ðŸ“­ No hay programaciÃ³n disponible para este dÃ­a</div>
        <div class="hours" id="hours"></div>
        <div class="rows" id="rows"></div>
      </div>
    </div>
  </main>

  <div class="modal-overlay" id="modalOverlay" onclick="closeModal()">
    <div class="modal-content" onclick="event.stopPropagation()">
      <img id="m-img" src="" alt="Banner">
      <button class="btn-close" onclick="closeModal()">&times;</button>
      <div class="modal-info">
        <h2 class="modal-title" id="m-title"></h2>
        <span class="modal-label">Canal</span>
        <p id="m-channel" style="font-weight: bold;"></p>
        <span class="modal-label">Fecha y Hora</span>
        <p id="m-time"></p>
        <span class="modal-label">DescripciÃ³n</span>
        <p id="m-desc"></p>
        <a id="liveBtn" href="#" target="_blank" style="
     display:none;
     margin-top:14px;
     background:#38bdf8;
     color:#020617;
     text-align:center;
     padding:10px;
     border-radius:6px;
     font-weight:bold;
     text-decoration:none;
   ">
          â–¶ VER EN VIVO
        </a>
      </div>
    </div>
  </div>

  <script>

    let currentModalProgram = null;

    const channelsData = {
      "Ledesmita TV": "img/LedesmitaTV-200x200.png",
      "Caracol TV": "img/Caracol-TV-200x200.png",
      "Caracol HD2": "img/Caracol-HD2-200x200.png",
      "RCN TV": "img/RCN-TV-200x200.png",
      "Win Sports": "img/Win-Sports-200x200.png",
      "Win Sports+": "img/Win-Sports+-200x200.png",
      "DSports": ".img/DSports-200x200.png",
      "DSports 2": "img/DSports2-200x200.png",
      "DSports+": "img/DSports+-200x200.png",
      "Disney+": "img/DisneyPlus-200x200.png",
      "ESPN": "img/ESPN-200x200.png",
    };

    // Programas con imÃ¡genes y descripciones
    const programs = [

      // Ledesmita TV
      {
        channel: "Ledesmita TV",
        start: "2026-02-02 15:00",
        end: "2026-02-02 17:00",
        title: "Ledesmita TV (Prueba)",
        desc: "SeÃ±al de Prueba de Ledesmita TV.",
        img: "https://images.unsplash.com/photo-1641135698530-8d919344c0e5?w=500",
        liveUrl: "go:LTV"
      },
      {
        channel: "Ledesmita TV",
        start: "2026-12-31 18:00",
        end: "2026-12-31 24:00",
        title: "Times Square NYE 2027",
        desc: "CelebraciÃ³n en vivo de AÃ±o Nuevo desde Times Square, Nueva York, con mÃºsica, espectÃ¡culos y la tradicional caÃ­da de la bola para recibir el 2027.",
        img: "https://vfolder.s3.us-east-1.amazonaws.com/files-v3/nVbOcU614bX/o-times-square-ball-facebook_(1).jpg",
        liveUrl: "go:LTV"
      },
      {
        channel: "Ledesmita TV",
        start: "2027-01-01 00:00",
        end: "2027-01-01 00:30",
        title: "Times Square NYE 2027",
        desc: "CelebraciÃ³n en vivo de AÃ±o Nuevo desde Times Square, Nueva York, con mÃºsica, espectÃ¡culos y la tradicional caÃ­da de la bola para recibir el 2027.",
        img: "https://vfolder.s3.us-east-1.amazonaws.com/files-v3/nVbOcU614bX/o-times-square-ball-facebook_(1).jpg",
        liveUrl: "go:LTV"
      },

      // Win Sports+
      {
        channel: "Win Sports+",
        start: "2026-01-31 17:00",
        end: "2026-01-31 19:00",
        title: "Inter de Miami Vs. AtlÃ©tico Nacional (Amistoso)",
        desc: "Gira de pretemporada internacional del Inter Miami y preparaciÃ³n de AtlÃ©tico Nacional para la Liga BetPlay y la Copa Sudamericana.",
        img: "https://unity-img.tbxapis.com/v0/images/801ca66694329da3ba697f38c94bf0a1/bannerItem/68ea72413085eb7d6ef0885b/1cab2308d39c6d571068bcaebb8558fb/img.png",
        liveUrl: "go:Evento2"
      },

      // RCN TV
      {
        channel: "RCN TV",
        start: "2026-02-05 10:30",
        end: "2026-02-05 14:00",
        title: "Campeonato Nacional de Ruta",
        desc: "Con este recorrido, los Campeonatos Nacionales de Ruta SistecrÃ©dito 2026 prometen un espectÃ¡culo deportivo de alto nivel, que pondrÃ¡ a prueba la preparaciÃ³n, estrategia y fortaleza de los mejores ciclistas del paÃ­s.",
        img: "https://efbt585jris.exactdn.com/wp-content/uploads/2024/12/portada-lote-ciclismo-ruta.jpg",
        liveUrl: "go:RCNTV"
      },
      {
        channel: "RCN TV",
        start: "2026-02-06 11:30",
        end: "2026-02-06 15:00",
        title: "Campeonato Nacional de Ruta",
        desc: "Con este recorrido, los Campeonatos Nacionales de Ruta SistecrÃ©dito 2026 prometen un espectÃ¡culo deportivo de alto nivel, que pondrÃ¡ a prueba la preparaciÃ³n, estrategia y fortaleza de los mejores ciclistas del paÃ­s.",
        img: "https://efbt585jris.exactdn.com/wp-content/uploads/2024/12/portada-lote-ciclismo-ruta.jpg",
        liveUrl: "go:RCNTV"
      },
      {
        channel: "RCN TV",
        start: "2026-02-07 10:30",
        end: "2026-02-07 14:00",
        title: "Campeonato Nacional de Ruta",
        desc: "Con este recorrido, los Campeonatos Nacionales de Ruta SistecrÃ©dito 2026 prometen un espectÃ¡culo deportivo de alto nivel, que pondrÃ¡ a prueba la preparaciÃ³n, estrategia y fortaleza de los mejores ciclistas del paÃ­s.",
        img: "https://efbt585jris.exactdn.com/wp-content/uploads/2024/12/portada-lote-ciclismo-ruta.jpg",
        liveUrl: "go:RCNTV"
      },
      {
        channel: "RCN TV",
        start: "2026-02-08 11:30",
        end: "2026-02-08 15:00",
        title: "Campeonato Nacional de Ruta",
        desc: "Con este recorrido, los Campeonatos Nacionales de Ruta SistecrÃ©dito 2026 prometen un espectÃ¡culo deportivo de alto nivel, que pondrÃ¡ a prueba la preparaciÃ³n, estrategia y fortaleza de los mejores ciclistas del paÃ­s.",
        img: "https://efbt585jris.exactdn.com/wp-content/uploads/2024/12/portada-lote-ciclismo-ruta.jpg",
        liveUrl: "go:RCNTV"
      },
      {
        channel: "RCN TV",
        start: "2026-03-01 8:00",
        end: "2026-03-01 12:00",
        title: "Gran Fondo Giro d'Italia Ride Like a Pro Colombia",
        desc: "El Giro de Italia llega a Colombia en su versiÃ³n para aficionados, ofreciendo rutas de 132 km y 84 km que recrean la experiencia del Giro. Este evento, que busca replicar la magia de la carrera italiana, incluye categorÃ­as para hombres y mujeres, apoyo logÃ­stico y premios, ademÃ¡s de un sorteo para viajar al Giro oficial de 2026.",
        img: "https://www.giroditalia-ridelikeapro-colombia.com/img/slider/foto02.webp",
        liveUrl: "go:RCNTV"
      },
      {
        channel: "RCN TV",
        start: "2026-03-26 18:30",
        end: "2026-03-26 20:30",
        title: "Colombia Vs. Croacia (Amistoso Internacional)",
        desc: "Un partido imperdible donde la Tricolor buscarÃ¡ demostrar que estÃ¡ lista para competir contra los mejores del mundo. Â¡El camino a la Copa pasa por Florida!",
        img: "https://www.futbolred.com/files/article_default_seo/uploads/2025/06/10/6848eb9d06ce7.jpeg",
        liveUrl: "go:Evento4"
      },
      {
        channel: "RCN TV",
        start: "2026-03-29 14:00",
        end: "2026-03-29 16:00",
        title: "Colombia Vs. Francia (Amistoso Internacional)",
        desc: "Â¡Duelo de potencias! ðŸ‡¨ðŸ‡´ vs ðŸ‡«ðŸ‡· Colombia enfrenta a Francia este 29 de marzo en el Ãºltimo gran reto de la fecha FIFA. Un partido con sabor a cuartos de final de un Mundial que nadie se quiere perder.",
        img: "https://a.espncdn.com/photo/2026/0108/r1598066_1296x729_16-9.jpg",
        liveUrl: "go:Evento3"
      },

      // Caracol TV
      {
        channel: "Caracol TV",
        start: "2026-03-26 18:30",
        end: "2026-03-26 20:30",
        title: "Colombia Vs. Croacia (Amistoso Internacional)",
        desc: "Un partido imperdible donde la Tricolor buscarÃ¡ demostrar que estÃ¡ lista para competir contra los mejores del mundo. Â¡El camino a la Copa pasa por Florida!",
        img: "https://www.futbolred.com/files/article_default_seo/uploads/2025/06/10/6848eb9d06ce7.jpeg",
        liveUrl: "go:Evento4"
      },
      {
        channel: "Caracol TV",
        start: "2026-03-29 14:00",
        end: "2026-03-29 16:00",
        title: "Colombia Vs. Francia (Amistoso Internacional)",
        desc: "Â¡Duelo de potencias! ðŸ‡¨ðŸ‡´ vs ðŸ‡«ðŸ‡· Colombia enfrenta a Francia este 29 de marzo en el Ãºltimo gran reto de la fecha FIFA. Un partido con sabor a cuartos de final de un Mundial que nadie se quiere perder.",
        img: "https://a.espncdn.com/photo/2026/0108/r1598066_1296x729_16-9.jpg",
        liveUrl: "go:Evento3"
      },

      // Caracol HD2
      {
        channel: "Caracol HD2",
        start: "2026-03-26 18:30",
        end: "2026-03-26 20:30",
        title: "Colombia Vs. Croacia (Amistoso Internacional)",
        desc: "Un partido imperdible donde la Tricolor buscarÃ¡ demostrar que estÃ¡ lista para competir contra los mejores del mundo. Â¡El camino a la Copa pasa por Florida!",
        img: "https://www.futbolred.com/files/article_default_seo/uploads/2025/06/10/6848eb9d06ce7.jpeg",
        liveUrl: "go:Evento4"
      },
      {
        channel: "Caracol HD2",
        start: "2026-03-29 14:00",
        end: "2026-03-29 16:00",
        title: "Colombia Vs. Francia (Amistoso Internacional)",
        desc: "Â¡Duelo de potencias! ðŸ‡¨ðŸ‡´ vs ðŸ‡«ðŸ‡· Colombia enfrenta a Francia este 29 de marzo en el Ãºltimo gran reto de la fecha FIFA. Un partido con sabor a cuartos de final de un Mundial que nadie se quiere perder.",
        img: "https://a.espncdn.com/photo/2026/0108/r1598066_1296x729_16-9.jpg",
        liveUrl: "go:Evento3"
      },

      // Disney+
      {
        channel: "Disney+",
        start: "2026-02-08 20:00",
        end: "2026-02-08 21:30",
        title: "Show de medio tiempo de Super Bowl LX",
        desc: "Bad Bunny toma el control del medio tiempo del Super Bowl LX. De Puerto Rico para el mundo, Benito llega al centro del campo para dar el show de su vida. ðŸ‡µðŸ‡· No te pierdas el evento televisivo mÃ¡s visto del aÃ±o donde la cultura latina serÃ¡ la verdadera MVP.",
        img: "https://fm.uc.edu.ve/storage/2025/09/AA1Nu8J3.jpeg",
        liveUrl: "go:Evento4"
      },
      {
        channel: "Disney+",
        start: "2026-02-22 19:15",
        end: "2026-02-22 24:00",
        title: "ViÃ±a del Mar 2026",
        desc: "Mar, cultura y espectÃ¡culo en una ciudad que vibra todo el aÃ±o frente al PacÃ­fico.",
        img: "https://static.ptocdn.net/especiales/fv2026_festival-de-vina/img/vina-animadores.webp",
        liveUrl: "go:Evento4"
      },
      {
        channel: "Disney+",
        start: "2026-02-23 00:00",
        end: "2026-02-23 03:00",
        title: "ViÃ±a del Mar 2026",
        desc: "Mar, cultura y espectÃ¡culo en una ciudad que vibra todo el aÃ±o frente al PacÃ­fico.",
        img: "https://static.ptocdn.net/especiales/fv2026_festival-de-vina/img/vina-animadores.webp",
        liveUrl: "go:Evento4"
      },
      {
        channel: "Disney+",
        start: "2026-02-23 19:15",
        end: "2026-02-23 24:00",
        title: "ViÃ±a del Mar 2026",
        desc: "Mar, cultura y espectÃ¡culo en una ciudad que vibra todo el aÃ±o frente al PacÃ­fico.",
        img: "https://static.ptocdn.net/especiales/fv2026_festival-de-vina/img/vina-animadores.webp",
        liveUrl: "go:Evento4"
      },
      {
        channel: "Disney+",
        start: "2026-02-24 00:00",
        end: "2026-02-24 03:00",
        title: "ViÃ±a del Mar 2026",
        desc: "Mar, cultura y espectÃ¡culo en una ciudad que vibra todo el aÃ±o frente al PacÃ­fico.",
        img: "https://static.ptocdn.net/especiales/fv2026_festival-de-vina/img/vina-animadores.webp",
        liveUrl: "go:Evento4"
      },
      {
        channel: "Disney+",
        start: "2026-02-24 19:15",
        end: "2026-02-24 24:00",
        title: "ViÃ±a del Mar 2026",
        desc: "Mar, cultura y espectÃ¡culo en una ciudad que vibra todo el aÃ±o frente al PacÃ­fico.",
        img: "https://static.ptocdn.net/especiales/fv2026_festival-de-vina/img/vina-animadores.webp",
        liveUrl: "go:Evento4"
      },
      {
        channel: "Disney+",
        start: "2026-02-25 00:00",
        end: "2026-02-25 03:00",
        title: "ViÃ±a del Mar 2026",
        desc: "Mar, cultura y espectÃ¡culo en una ciudad que vibra todo el aÃ±o frente al PacÃ­fico.",
        img: "https://static.ptocdn.net/especiales/fv2026_festival-de-vina/img/vina-animadores.webp",
        liveUrl: "go:Evento4"
      },
      {
        channel: "Disney+",
        start: "2026-02-25 19:15",
        end: "2026-02-25 24:00",
        title: "ViÃ±a del Mar 2026",
        desc: "Mar, cultura y espectÃ¡culo en una ciudad que vibra todo el aÃ±o frente al PacÃ­fico.",
        img: "https://static.ptocdn.net/especiales/fv2026_festival-de-vina/img/vina-animadores.webp",
        liveUrl: "go:Evento4"
      },
      {
        channel: "Disney+",
        start: "2026-02-26 00:00",
        end: "2026-02-26 03:00",
        title: "ViÃ±a del Mar 2026",
        desc: "Mar, cultura y espectÃ¡culo en una ciudad que vibra todo el aÃ±o frente al PacÃ­fico.",
        img: "https://static.ptocdn.net/especiales/fv2026_festival-de-vina/img/vina-animadores.webp",
        liveUrl: "go:Evento4"
      },
      {
        channel: "Disney+",
        start: "2026-02-26 19:15",
        end: "2026-02-26 24:00",
        title: "ViÃ±a del Mar 2026",
        desc: "Mar, cultura y espectÃ¡culo en una ciudad que vibra todo el aÃ±o frente al PacÃ­fico.",
        img: "https://static.ptocdn.net/especiales/fv2026_festival-de-vina/img/vina-animadores.webp",
        liveUrl: "go:Evento4"
      },
      {
        channel: "Disney+",
        start: "2026-02-27 00:00",
        end: "2026-02-27 03:00",
        title: "ViÃ±a del Mar 2026",
        desc: "Mar, cultura y espectÃ¡culo en una ciudad que vibra todo el aÃ±o frente al PacÃ­fico.",
        img: "https://static.ptocdn.net/especiales/fv2026_festival-de-vina/img/vina-animadores.webp",
        liveUrl: "go:Evento4"
      },
      {
        channel: "Disney+",
        start: "2026-02-27 19:15",
        end: "2026-02-27 24:00",
        title: "ViÃ±a del Mar 2026",
        desc: "Mar, cultura y espectÃ¡culo en una ciudad que vibra todo el aÃ±o frente al PacÃ­fico.",
        img: "https://static.ptocdn.net/especiales/fv2026_festival-de-vina/img/vina-animadores.webp",
        liveUrl: "go:Evento4"
      },
      {
        channel: "Disney+",
        start: "2026-02-28 00:00",
        end: "2026-02-28 03:00",
        title: "ViÃ±a del Mar 2026",
        desc: "Mar, cultura y espectÃ¡culo en una ciudad que vibra todo el aÃ±o frente al PacÃ­fico.",
        img: "https://static.ptocdn.net/especiales/fv2026_festival-de-vina/img/vina-animadores.webp",
        liveUrl: "go:Evento4"
      },
      {
        channel: "Disney+",
        start: "2026-03-27 13:00",
        end: "2026-03-27 15:30",
        title: "Finalissima: Argentina Vs. EspaÃ±a",
        desc: "La Finalissima no es solo una finalâ€¦ es un espectÃ¡culo para el mundo entero. ðŸŒâœ¨",
        img: "https://editorial.uefa.com/resources/02a0-1f7780933dc2-5c3b1af654f1-1000/16x9_finalissima_poster_1_v2.jpeg",
        liveUrl: "go:Evento4"
      },

      // ESPN
      {
        channel: "ESPN",
        start: "2026-03-27 13:00",
        end: "2026-03-27 15:30",
        title: "Finalissima: Argentina Vs. EspaÃ±a",
        desc: "La Finalissima no es solo una finalâ€¦ es un espectÃ¡culo para el mundo entero. ðŸŒâœ¨",
        img: "https://editorial.uefa.com/resources/02a0-1f7780933dc2-5c3b1af654f1-1000/16x9_finalissima_poster_1_v2.jpeg",
        liveUrl: "go:Evento4"
      },
    ];

    const TIMEZONE = "America/Bogota";
    let selectedDay;
    let autoCentered = false;

    const nowLine = document.getElementById("nowLine");
    const nowMsg = document.getElementById("nowMsg");
    const grid = document.getElementById("grid");
    const clock = document.getElementById("clock");
    const channelsDiv = document.getElementById("channels");
    const hoursDiv = document.getElementById("hours");
    const rowsDiv = document.getElementById("rows");

    function pxPerMinute() { return parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--px-per-minute")); }
    function nowCO() { return new Date(new Date().toLocaleString("en-US", { timeZone: TIMEZONE })); }
    function parseDT(s) {
      const [date, time] = s.split(" ");
      const [y, m, d] = date.split("-").map(Number);
      const [hh, mm] = time.split(":").map(Number);
      return new Date(y, m - 1, d, hh, mm, 0);
    }


    function todayCO() {
      const now = nowCO();
      const y = now.getFullYear();
      const m = String(now.getMonth() + 1).padStart(2, "0");
      const d = String(now.getDate()).padStart(2, "0");
      return `${y}-${m}-${d}`;
    }

    let today = todayCO();

    function checkDayChange() {
      const newToday = todayCO();

      if (newToday !== today) {
        today = newToday;

        // Buscar botÃ³n del nuevo dÃ­a
        const buttons = document.querySelectorAll(".day-btn");
        let found = false;

        buttons.forEach(btn => {
          btn.classList.remove("active");

          if (
            btn.textContent === "HOY" ||
            btn.textContent === newToday
          ) {
            btn.classList.add("active");
            selectedDay = newToday;
            found = true;
          }
        });

        // Si el dÃ­a no existÃ­a en los botones, lo agregamos
        if (!found) {
          const b = document.createElement("button");
          b.className = "day-btn active";
          b.textContent = "HOY";
          b.onclick = () => {
            document.querySelectorAll(".day-btn").forEach(x => x.classList.remove("active"));
            b.classList.add("active");
            selectedDay = today;
            autoCentered = false;
            renderEPG();
            update(true);
          };

          document.getElementById("days").prepend(b);
          selectedDay = today;
        }

        autoCentered = false;
        renderEPG();
        update(true);

        console.log("ðŸ“… Cambio automÃ¡tico de dÃ­a:", today);
      }
    }


    const validPrograms = programs.filter(p => p.start.slice(0, 10) >= today);

    // Un solo Set para evitar duplicados (incluido HOY)
    const days = [...new Set([today, ...validPrograms.map(p => p.start.slice(0, 10))])];

    // Generar botones de dÃ­as
    const daysContainer = document.getElementById("days");
    days.sort().forEach((d, i) => {
      const b = document.createElement("button");
      b.className = "day-btn" + (i === 0 ? " active" : "");
      b.textContent = d === today ? "HOY" : d;
      b.onclick = () => {
        document.querySelectorAll(".day-btn").forEach(x => x.classList.remove("active"));
        b.classList.add("active");
        selectedDay = d;
        autoCentered = false;
        renderEPG();
        update(true);
      };
      daysContainer.appendChild(b);
    });
    selectedDay = today;

    function renderEPG() {
      // Limpiar contenedores
      channelsDiv.innerHTML = '<div class="channel-spacer"></div>';
      hoursDiv.innerHTML = '';
      rowsDiv.innerHTML = '';

      // 1. Filtrar programas del dÃ­a seleccionado
      const dayPrograms = validPrograms.filter(p => p.start.startsWith(selectedDay));

      // 2. Obtener solo los canales que tienen programas hoy
      const activeChannelNames = [...new Set(dayPrograms.map(p => p.channel))];

      // 3. Renderizar canales activos y sus filas
      activeChannelNames.forEach(chName => {
        // Renderizar logo a la izquierda
        channelsDiv.innerHTML += `
      <div class="channel">
        <img src="${channelsData[chName] || 'https://via.placeholder.com/40'}">
        <span>${chName}</span>
      </div>`;

        // Renderizar fila en el grid
        const row = document.createElement("div");
        row.className = "row";

        dayPrograms.filter(p => p.channel === chName).forEach(p => {
          const s = parseDT(p.start);
          const e = parseDT(p.end);
          const left = (s.getHours() * 60 + s.getMinutes()) * pxPerMinute();
          const width = ((e - s) / 60000) * pxPerMinute();

          const pDiv = document.createElement("div");
          pDiv.className = "program";
          pDiv.dataset.start = s.getTime();
          pDiv.dataset.end = e.getTime();
          pDiv.dataset.live = "0";
          pDiv.style.left = left + "px";
          pDiv.style.width = width + "px";
          pDiv.textContent = p.title;
          pDiv.onclick = () => openModal(p);

          // ðŸ”´ INDICADOR EN VIVO


          row.appendChild(pDiv);
        });
        rowsDiv.appendChild(row);
      });

      // Renderizar horas
      for (let h = 0; h < 24; h++) {
        hoursDiv.innerHTML += `<div class="hour">${String(h).padStart(2, "0")}:00</div>`;
      }

      const totalMinutes = 24 * 60;
      const totalWidth = totalMinutes * pxPerMinute();

      rowsDiv.style.minWidth = totalWidth + "px";
      hoursDiv.style.minWidth = totalWidth + "px";

      document.querySelectorAll(".row").forEach(r => {
        r.style.minWidth = totalWidth + "px";
      });
    }

    function openModal(p) {
      currentModalProgram = p;
      document.getElementById('m-title').textContent = p.title;
      document.getElementById('m-channel').textContent = p.channel;
      document.getElementById('m-desc').textContent = p.desc || "InformaciÃ³n del evento disponible en vivo.";
      document.getElementById('m-img').src = p.img || "https://via.placeholder.com/500x200?text=TV+Show";

      const s = p.start.split(' ')[1];
      const e = p.end.split(' ')[1];
      const fecha = p.start.split(' ')[0];
      document.getElementById('m-time').textContent = `${fecha} | ${s} - ${e}`;

      const btn = document.getElementById("liveBtn");
      btn.style.display = "none";

      if (p.liveUrl && selectedDay === today) {
        const now = nowCO();
        const s = parseDT(p.start);
        const e = parseDT(p.end);

        if (now >= s && now <= e) {
          btn.href = p.liveUrl;
          btn.style.display = "block";
        }
      }

      document.getElementById('modalOverlay').style.display = 'flex';
    }

    function closeModal() {
      currentModalProgram = null;
      document.getElementById("liveBtn").style.display = "none";
      document.getElementById('modalOverlay').style.display = 'none';
    }

    function update(forceCenter = false) {
      const now = nowCO();
      clock.textContent = now.toTimeString().substring(0, 8) + " (GMT-5)";



      if (selectedDay !== today) {
        nowLine.style.display = "none";
        nowMsg.style.display = "none";
        return;
      }

      const minutes = now.getHours() * 60 + now.getMinutes();
      const posX = minutes * pxPerMinute();

      nowLine.style.display = "block";
      nowLine.style.left = posX + "px";

      // Mantiene el mensaje si no hay programas para HOY
      const programsToday = validPrograms.some(p => p.start.startsWith(today));
      nowMsg.style.display = programsToday ? "none" : "block";
      nowMsg.style.left = posX + "px";

      if (!autoCentered && forceCenter) {
        grid.scrollLeft = posX - grid.clientWidth / 2;
        autoCentered = true;
      }
      updateLiveBadges();

    }
    function updateLiveBadges() {
      if (selectedDay !== today) return;

      const now = nowCO().getTime();

      document.querySelectorAll(".program").forEach(p => {
        const start = Number(p.dataset.start);
        const end = Number(p.dataset.end);
        const wasLive = p.dataset.live === "1";
        const isLive = now >= start && now <= end;

        // ðŸ”´ ENTRA EN VIVO
        if (isLive && !wasLive) {
          p.dataset.live = "1";
          p.classList.add("live");

          const badge = document.createElement("div");
          badge.className = "live-badge";
          badge.textContent = "EN VIVO";
          p.appendChild(badge);

          // ðŸ”” EVENTO LIVE START
          p.dispatchEvent(new CustomEvent("liveStart", {
            bubbles: true,
            detail: {
              title: p.textContent.trim(),
              start,
              end,
              element: p
            }
          }));
        }

        // âš« SALE DE EN VIVO
        if (!isLive && wasLive) {
          p.dataset.live = "0";
          p.classList.remove("live");

          const badge = p.querySelector(".live-badge");
          if (badge) badge.remove();

          // ðŸ”• EVENTO LIVE END
          p.dispatchEvent(new CustomEvent("liveEnd", {
            bubbles: true,
            detail: {
              title: p.textContent.trim(),
              start,
              end,
              element: p
            }
          }));
        }
      });
    }

    document.addEventListener("liveStart", e => {
      console.log("ðŸ”´ EN VIVO:", e.detail.title);
    });

    document.addEventListener("liveEnd", e => {
      console.log("âš« FINALIZÃ“:", e.detail.title);
    })

    document.addEventListener("liveStart", e => {
      if (!currentModalProgram) return;

      const btn = document.getElementById("liveBtn");
      const modalStart = parseDT(currentModalProgram.start).getTime();

      if (currentModalProgram.liveUrl && e.detail.start === modalStart) {
        btn.href = currentModalProgram.liveUrl;
        btn.style.display = "block";
      }
    });

    document.addEventListener("liveEnd", e => {
      if (!currentModalProgram) return;

      const modalStart = parseDT(currentModalProgram.start).getTime();
      if (e.detail.start === modalStart) {
        document.getElementById("liveBtn").style.display = "none";
      }
    });


    grid.addEventListener("wheel", e => {
      e.preventDefault();
      grid.scrollLeft += e.deltaY;
    }, { passive: false });

    renderEPG();
    update(true);
    setInterval(() => {
      checkDayChange(); // ðŸ”„ detecta las 00:00
      update();
    }, 1000);

  </script>

</body>

</html>